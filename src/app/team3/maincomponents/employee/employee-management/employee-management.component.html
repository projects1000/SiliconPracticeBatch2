<div class="employee-management">
  <!-- Header Section -->
  <div class="header-section">
    <h1>Employee Management</h1>
  </div>

  <!-- Controls Section -->
  <div class="controls">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="onSearchChange()"
        placeholder="Search employees by name, department, role, or email..."
        class="search-input">
    </div>
    
    <div class="action-buttons">
      <!-- Admin Only Actions -->
      <button 
        *ngIf="isAdmin"
        (click)="addEmployee()" 
        class="btn btn-primary">
        <span class="btn-icon">â•</span>
        Add Employee
      </button>
      
      <!-- Additional Admin Actions -->
     
      
      <!-- View Counter -->
      <div class="employee-count">
        {{filteredEmployees.length}} of {{employees.length}} employees
      </div>
    </div>
  </div>

  <!-- Employee Form (Admin Only) -->
  <div *ngIf="showEmployeeForm && isAdmin" class="form-section">
    <app-employee-form
      [employee]="selectedEmployee"
      [isEditMode]="isEditMode"
      (save)="onEmployeeSaved($event)"
      (cancel)="onFormCancel()">
    </app-employee-form>
  </div>

  <!-- Desktop Table View -->
  <div class="table-container" *ngIf="!showEmployeeForm && !isMobile">
    <table class="employee-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Age</th>
          <th>Department</th>
          <th>Role</th>
          <th>Email</th>
          <th>Salary</th>
          <th *ngIf="isAdmin">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr 
          *ngFor="let employee of filteredEmployees" 
          [ngClass]="getRowClass(employee)">
          
          <td class="employee-name">
            <div class="name-wrapper">
              <span class="avatar"></span>
              {{employee.name}}
              <span *ngIf="isMinor(employee.age)" class="minor-indicator">ğŸ‘¶</span>
            </div>
          </td>
          
          <td class="employee-age">{{employee.age}}</td>
          <td class="employee-department">
            <span class="dept-badge">{{employee.department}}</span>
          </td>
          <td class="employee-role">{{employee.role}}</td>
          <td class="employee-email">{{employee.email}}</td>
          <td class="employee-salary">
            {{employee.salary?.toLocaleString()}}
          </td>
          
          <td class="employee-actions" *ngIf="isAdmin">
            <!-- Edit Button -->
            <button 
              (click)="editEmployee(employee)"
              class="btn-action btn-edit"
              title="Edit Employee">
              âœï¸
            </button>
            
            <!-- Delete Button -->
            <button 
              (click)="deleteEmployee(employee)"
              class="btn-action btn-delete"
              title="Delete Employee">
              ğŸ—‘ï¸
            </button>

            <!-- View Button (for all users) -->
           
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Empty State -->
    <div *ngIf="filteredEmployees.length === 0" class="empty-state">
      <div class="empty-icon">ğŸ“</div>
      <h3>No Employees Found</h3>
      <p *ngIf="searchTerm">
        No employees match your search for "{{searchTerm}}"
      </p>
      <p *ngIf="!searchTerm">
        No employees available in the system.
        <span *ngIf="isAdmin">Click "Add Employee" to get started.</span>
      </p>
    </div>
  </div>

  <!-- Mobile Card View -->
  <div class="mobile-card-view" *ngIf="!showEmployeeForm && isMobile">
    <div class="emp-card" 
         *ngFor="let employee of filteredEmployees" 
         [ngClass]="{'minor-row': isMinor(employee.age)}">
      
      <div class="emp-card-header">
        <div class="emp-avatar"></div>
        <div class="emp-name">
          {{employee.name}}
          <span *ngIf="isMinor(employee.age)" class="minor-badge">ğŸ‘¶ Minor</span>
        </div>
      </div>

      <div class="emp-card-body">
        <p><strong>Age:</strong> {{employee.age}}</p>
        <p><strong>Department:</strong> {{employee.department}}</p>
        <p><strong>Role:</strong> {{employee.role}}</p>
        <p><strong>Email:</strong> {{employee.email}}</p>
        <p><strong>Salary:</strong> ${{employee.salary?.toLocaleString()}}</p>
      </div>

      <div class="emp-card-actions">
        <button *ngIf="isAdmin" class="card-btn edit" (click)="editEmployee(employee)">âœï¸ Edit</button>
        <button *ngIf="isAdmin" class="card-btn delete" (click)="deleteEmployee(employee)">ğŸ—‘ï¸ Delete</button>
      </div>
    </div>

    <!-- Mobile Empty State -->
    <div *ngIf="filteredEmployees.length === 0" class="empty-state">
      <div class="empty-icon">ğŸ“</div>
      <h3>No Employees Found</h3>
      <p *ngIf="searchTerm">
        No employees match your search for "{{searchTerm}}"
      </p>
      <p *ngIf="!searchTerm">
        No employees available.
        <span *ngIf="isAdmin">Tap "Add Employee" to get started.</span>
      </p>
    </div>
  </div>

  <!-- Summary Section -->
  <div class="summary" *ngIf="!showEmployeeForm && filteredEmployees.length > 0">
    <div class="summary-item">
      <strong>Total Employees:</strong> {{employees.length}}
    </div>
    <div class="summary-item">
      <strong>Adult Employees:</strong> {{getAdultCount()}}
    </div>
    <div class="summary-item minor-count">
      <strong>Minor Employees:</strong> {{getMinorCount()}}
    </div>
    <div class="summary-item">
      <strong>Your Access:</strong> 
      <span [class]="isAdmin ? 'access-admin' : 'access-customer'">
        {{isAdmin ? 'Full Administrator' : 'View Only'}}
      </span>
    </div>
  </div>

  <!-- File Import Section (Hidden but functional) -->
  <div *ngIf="isAdmin" class="file-import-section" style="display: none;">
    <input 
      type="file" 
      #fileInput
      (change)="importEmployeeData($event)"
      accept=".json"
      style="display: none;">
    <button 
      (click)="fileInput.click()"
      class="btn btn-info">
      <span class="btn-icon">ğŸ“¥</span>
      Import Data
    </button>
  </div>
</div>